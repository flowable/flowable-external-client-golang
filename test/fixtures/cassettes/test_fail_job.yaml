---
version: 1
interactions:
    - request:
        body: "--f94aefec1b067d74a80b4f6d000674a239f94bc839ca59ea72a1df0e2cbe\r\nContent-Disposition: form-data; name=\"file\"; filename=\"externalWorkerProcess.bpmn\"\r\nContent-Type: application/octet-stream\r\n\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:flowable=\"http://flowable.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\" xmlns:design=\"http://flowable.org/design\" typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://flowable.org/test\" design:palette=\"flowable-work-process-palette\">\n  <process id=\"externalWorkerProcess\" name=\"External Worker Process\" isExecutable=\"true\" flowable:candidateStarterGroups=\"flowableUser\">\n    <extensionElements>\n      <design:stencilid><![CDATA[BPMNDiagram]]></design:stencilid>\n      <design:creationdate><![CDATA[2023-08-08T10:37:00.833Z]]></design:creationdate>\n      <design:modificationdate><![CDATA[2023-08-08T10:37:26.046Z]]></design:modificationdate>\n    </extensionElements>\n    <serviceTask id=\"bpmnTask_3\" name=\"External Worker task\" flowable:type=\"external-worker\" flowable:topic=\"myTopic\">\n      <extensionElements>\n        <design:stencilid><![CDATA[ExternalWorkerTask]]></design:stencilid>\n        <design:stencilsuperid><![CDATA[Task]]></design:stencilsuperid>\n      </extensionElements>\n    </serviceTask>\n    <startEvent id=\"startnoneevent1\" flowable:initiator=\"initiator\" flowable:formFieldValidation=\"false\">\n      <extensionElements>\n        <flowable:work-form-field-validation><![CDATA[false]]></flowable:work-form-field-validation>\n        <design:stencilid><![CDATA[StartNoneEvent]]></design:stencilid>\n      </extensionElements>\n    </startEvent>\n    <endEvent id=\"bpmnEndEvent_1\">\n      <extensionElements>\n        <design:stencilid><![CDATA[EndNoneEvent]]></design:stencilid>\n      </extensionElements>\n    </endEvent>\n    <sequenceFlow id=\"bpmnSequenceFlow_4\" sourceRef=\"bpmnTask_3\" targetRef=\"bpmnEndEvent_1\">\n      <extensionElements>\n        <design:stencilid><![CDATA[SequenceFlow]]></design:stencilid>\n      </extensionElements>\n    </sequenceFlow>\n    <sequenceFlow id=\"bpmnSequenceFlow_2\" sourceRef=\"startnoneevent1\" targetRef=\"bpmnTask_3\">\n      <extensionElements>\n        <design:stencilid><![CDATA[SequenceFlow]]></design:stencilid>\n      </extensionElements>\n    </sequenceFlow>\n  </process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_externalWorkerProcess\">\n    <bpmndi:BPMNPlane bpmnElement=\"externalWorkerProcess\" id=\"BPMNPlane_externalWorkerProcess\">\n      <bpmndi:BPMNShape bpmnElement=\"bpmnTask_3\" id=\"BPMNShape_bpmnTask_3\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"451.0\" y=\"236.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"startnoneevent1\" id=\"BPMNShape_startnoneevent1\">\n        <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"317.0\" y=\"261.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"bpmnEndEvent_1\" id=\"BPMNShape_bpmnEndEvent_1\">\n        <omgdc:Bounds height=\"28.0\" width=\"28.0\" x=\"700.0\" y=\"262.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge bpmnElement=\"bpmnSequenceFlow_4\" id=\"BPMNEdge_bpmnSequenceFlow_4\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"14.0\" flowable:targetDockerY=\"14.0\">\n        <omgdi:waypoint x=\"551.0\" y=\"276.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"700.0\" y=\"276.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"bpmnSequenceFlow_2\" id=\"BPMNEdge_bpmnSequenceFlow_2\" flowable:sourceDockerX=\"15.0\" flowable:sourceDockerY=\"15.0\" flowable:targetDockerX=\"50.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"347.0\" y=\"276.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"399.0\" y=\"276.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"399.0\" y=\"276.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"451.0\" y=\"276.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</definitions>\r\n--f94aefec1b067d74a80b4f6d000674a239f94bc839ca59ea72a1df0e2cbe--\r\n"
        form: {}
        headers:
            Authorization:
                - Basic YWRtaW46dGVzdA==
            Content-Type:
                - multipart/form-data; boundary=f94aefec1b067d74a80b4f6d000674a239f94bc839ca59ea72a1df0e2cbe
        url: http://localhost:8090/process-api/repository/deployments
        method: POST
      response:
        body: '{"id":"PRC-b484e125-084c-11f1-b104-babe3fa8c160","name":"externalWorkerProcess","deploymentTime":"2026-02-12T19:54:56.434Z","category":null,"parentDeploymentId":"PRC-b484e125-084c-11f1-b104-babe3fa8c160","url":"http://localhost:8090/process-api/repository/deployments/PRC-b484e125-084c-11f1-b104-babe3fa8c160","tenantId":""}'
        headers:
            Cache-Control:
                - no-cache, no-store, max-age=0, must-revalidate
            Content-Type:
                - application/json
            Date:
                - Thu, 12 Feb 2026 19:54:56 GMT
            Expires:
                - "0"
            Pragma:
                - no-cache
            Set-Cookie:
                - XSRF-TOKEN=15c3db86-a634-4c8e-a2e8-d3ab1b017daf; Path=/
            Vary:
                - accept-encoding
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - SAMEORIGIN
            X-Xss-Protection:
                - "0"
        status: '201 '
        code: 201
        duration: 91.568416ms
    - request:
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
            Authorization:
                - Basic YWRtaW46dGVzdA==
        url: http://localhost:8090/process-api/repository/process-definitions?deploymentId=PRC-b484e125-084c-11f1-b104-babe3fa8c160
        method: GET
      response:
        body: '{"data":[{"id":"PRC-externalWorkerProcess:1:b485a477-084c-11f1-b104-babe3fa8c160","url":"http://localhost:8090/process-api/repository/process-definitions/PRC-externalWorkerProcess:1:b485a477-084c-11f1-b104-babe3fa8c160","key":"externalWorkerProcess","version":1,"name":"External Worker Process","description":null,"tenantId":"","deploymentId":"PRC-b484e125-084c-11f1-b104-babe3fa8c160","deploymentUrl":"http://localhost:8090/process-api/repository/deployments/PRC-b484e125-084c-11f1-b104-babe3fa8c160","resource":"http://localhost:8090/process-api/repository/deployments/PRC-b484e125-084c-11f1-b104-babe3fa8c160/resources/externalWorkerProcess.bpmn","diagramResource":null,"category":"http://flowable.org/test","graphicalNotationDefined":true,"suspended":false,"startFormDefined":false}],"total":1,"start":0,"sort":"name","order":"asc","size":1}'
        headers:
            Cache-Control:
                - no-cache, no-store, max-age=0, must-revalidate
            Content-Type:
                - application/json
            Date:
                - Thu, 12 Feb 2026 19:54:56 GMT
            Expires:
                - "0"
            Pragma:
                - no-cache
            Set-Cookie:
                - XSRF-TOKEN=34ad40ec-34bf-4b24-bd91-ca007d62c0a8; Path=/
            Vary:
                - accept-encoding
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - SAMEORIGIN
            X-Xss-Protection:
                - "0"
        status: '200 '
        code: 200
        duration: 88.398292ms
    - request:
        body: '{"processDefinitionId":"PRC-externalWorkerProcess:1:b485a477-084c-11f1-b104-babe3fa8c160"}'
        form: {}
        headers:
            Accept:
                - application/json
            Authorization:
                - Basic YWRtaW46dGVzdA==
            Content-Type:
                - application/json
        url: http://localhost:8090/process-api/runtime/process-instances
        method: POST
      response:
        body: '{"id":"PRC-b4bb5a79-084c-11f1-b104-babe3fa8c160","url":"http://localhost:8090/process-api/runtime/process-instances/PRC-b4bb5a79-084c-11f1-b104-babe3fa8c160","name":null,"businessKey":null,"businessStatus":null,"suspended":false,"ended":false,"processDefinitionId":"PRC-externalWorkerProcess:1:b485a477-084c-11f1-b104-babe3fa8c160","processDefinitionUrl":"http://localhost:8090/process-api/repository/process-definitions/PRC-externalWorkerProcess:1:b485a477-084c-11f1-b104-babe3fa8c160","processDefinitionName":"External Worker Process","processDefinitionDescription":null,"activityId":null,"startUserId":"admin","startTime":"2026-02-12T19:54:56.791Z","superProcessInstanceId":null,"variables":[{"name":"initiator","type":"string","value":"admin","scope":"local"}],"callbackId":null,"callbackType":null,"referenceId":null,"referenceType":null,"propagatedStageInstanceId":null,"tenantId":"","completed":false}'
        headers:
            Cache-Control:
                - no-cache, no-store, max-age=0, must-revalidate
            Content-Type:
                - application/json
            Date:
                - Thu, 12 Feb 2026 19:54:56 GMT
            Expires:
                - "0"
            Pragma:
                - no-cache
            Set-Cookie:
                - XSRF-TOKEN=57ae8f48-8251-4110-bc65-544e4aa4603a; Path=/
            Vary:
                - accept-encoding
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - SAMEORIGIN
            X-Xss-Protection:
                - "0"
        status: '201 '
        code: 201
        duration: 97.651125ms
    - request:
        body: '{"topic":"myTopic","lockDuration":"PT10S","numberOfTasks":1,"numberOfRetries":3,"workerId":"test-worker","scopeType":"bpmn"}'
        form: {}
        headers:
            Accept:
                - application/json
            Authorization:
                - Basic YWRtaW46dGVzdA==
            Content-Type:
                - application/json
        url: http://localhost:8090/external-job-api/acquire/jobs
        method: POST
      response:
        body: '[{"id":"JOB-b4bc44e3-084c-11f1-b104-babe3fa8c160","url":"http://localhost:8090/external-job-api/jobs/JOB-b4bc44e3-084c-11f1-b104-babe3fa8c160","correlationId":"b4bc44e2-084c-11f1-b104-babe3fa8c160","processInstanceId":"PRC-b4bb5a79-084c-11f1-b104-babe3fa8c160","processDefinitionId":"PRC-externalWorkerProcess:1:b485a477-084c-11f1-b104-babe3fa8c160","executionId":"PRC-b4bb818c-084c-11f1-b104-babe3fa8c160","scopeId":null,"subScopeId":null,"scopeDefinitionId":null,"scopeType":null,"elementId":"bpmnTask_3","elementName":"External Worker task","retries":3,"exceptionMessage":null,"dueDate":null,"createTime":"2026-02-12T19:54:56.797Z","tenantId":"","lockOwner":"test-worker","lockExpirationTime":"2026-02-12T19:55:06.990Z","variables":[{"name":"initiator","type":"string","value":"admin"}]}]'
        headers:
            Cache-Control:
                - no-cache, no-store, max-age=0, must-revalidate
            Content-Type:
                - application/json
            Date:
                - Thu, 12 Feb 2026 19:54:56 GMT
            Expires:
                - "0"
            Pragma:
                - no-cache
            Set-Cookie:
                - XSRF-TOKEN=2784a833-f5d0-4cf7-b013-c75144bf7413; Path=/
            Vary:
                - accept-encoding
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - SAMEORIGIN
            X-Xss-Protection:
                - "0"
        status: '200 '
        code: 200
        duration: 85.763792ms
    - request:
        body: '{"status":"","workerId":"test-worker","variables":null,"errorCode":"failed"}'
        form: {}
        headers:
            Accept:
                - application/json
            Authorization:
                - Basic YWRtaW46dGVzdA==
            Content-Type:
                - application/json
        url: http://localhost:8090/external-job-api/acquire/jobs/JOB-b4bc44e3-084c-11f1-b104-babe3fa8c160/fail
        method: POST
      response:
        body: ""
        headers:
            Cache-Control:
                - no-cache, no-store, max-age=0, must-revalidate
            Date:
                - Thu, 12 Feb 2026 19:54:57 GMT
            Expires:
                - "0"
            Pragma:
                - no-cache
            Set-Cookie:
                - XSRF-TOKEN=0c2e1c20-ae9d-4861-94c0-673e7a7ef502; Path=/
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - SAMEORIGIN
            X-Xss-Protection:
                - "0"
        status: '204 '
        code: 204
        duration: 86.024583ms
    - request:
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
            Authorization:
                - Basic YWRtaW46dGVzdA==
        url: http://localhost:8090/external-job-api/jobs/JOB-b4bc44e3-084c-11f1-b104-babe3fa8c160
        method: GET
      response:
        body: '{"id":"JOB-b4bc44e3-084c-11f1-b104-babe3fa8c160","url":"http://localhost:8090/external-job-api/jobs/JOB-b4bc44e3-084c-11f1-b104-babe3fa8c160","correlationId":"b4bc44e2-084c-11f1-b104-babe3fa8c160","processInstanceId":"PRC-b4bb5a79-084c-11f1-b104-babe3fa8c160","processDefinitionId":"PRC-externalWorkerProcess:1:b485a477-084c-11f1-b104-babe3fa8c160","executionId":"PRC-b4bb818c-084c-11f1-b104-babe3fa8c160","scopeId":null,"subScopeId":null,"scopeDefinitionId":null,"scopeType":null,"elementId":"bpmnTask_3","elementName":"External Worker task","retries":2,"exceptionMessage":null,"dueDate":null,"createTime":"2026-02-12T19:54:56.797Z","tenantId":"","lockOwner":null,"lockExpirationTime":null}'
        headers:
            Cache-Control:
                - no-cache, no-store, max-age=0, must-revalidate
            Content-Type:
                - application/json
            Date:
                - Thu, 12 Feb 2026 19:54:57 GMT
            Expires:
                - "0"
            Pragma:
                - no-cache
            Set-Cookie:
                - XSRF-TOKEN=3556b2e8-1fd9-446d-8450-8cd52f85564b; Path=/
            Vary:
                - accept-encoding
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - SAMEORIGIN
            X-Xss-Protection:
                - "0"
        status: '200 '
        code: 200
        duration: 84.258875ms
    - request:
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
            Authorization:
                - Basic YWRtaW46dGVzdA==
        url: http://localhost:8090/process-api/history/historic-activity-instances?processInstanceId=PRC-b4bb5a79-084c-11f1-b104-babe3fa8c160
        method: GET
      response:
        body: '{"data":[{"id":"PRC-b4bb818d-084c-11f1-b104-babe3fa8c160","activityId":"startnoneevent1","activityName":null,"activityType":"startEvent","processDefinitionId":"PRC-externalWorkerProcess:1:b485a477-084c-11f1-b104-babe3fa8c160","processDefinitionUrl":"http://localhost:8090/process-api/repository/process-definitions/PRC-externalWorkerProcess:1:b485a477-084c-11f1-b104-babe3fa8c160","processInstanceId":"PRC-b4bb5a79-084c-11f1-b104-babe3fa8c160","processInstanceUrl":"http://localhost:8090/process-api/history/historic-process-instances/PRC-b4bb5a79-084c-11f1-b104-babe3fa8c160","executionId":"PRC-b4bb818c-084c-11f1-b104-babe3fa8c160","taskId":null,"calledProcessInstanceId":null,"assignee":null,"startTime":"2026-02-12T19:54:56.792Z","endTime":"2026-02-12T19:54:56.795Z","durationInMillis":3,"tenantId":""},{"id":"PRC-b4bbf6c0-084c-11f1-b104-babe3fa8c160","activityId":"bpmnSequenceFlow_2","activityName":null,"activityType":"sequenceFlow","processDefinitionId":"PRC-externalWorkerProcess:1:b485a477-084c-11f1-b104-babe3fa8c160","processDefinitionUrl":"http://localhost:8090/process-api/repository/process-definitions/PRC-externalWorkerProcess:1:b485a477-084c-11f1-b104-babe3fa8c160","processInstanceId":"PRC-b4bb5a79-084c-11f1-b104-babe3fa8c160","processInstanceUrl":"http://localhost:8090/process-api/history/historic-process-instances/PRC-b4bb5a79-084c-11f1-b104-babe3fa8c160","executionId":"PRC-b4bb818c-084c-11f1-b104-babe3fa8c160","taskId":null,"calledProcessInstanceId":null,"assignee":null,"startTime":"2026-02-12T19:54:56.795Z","endTime":"2026-02-12T19:54:56.795Z","durationInMillis":0,"tenantId":""},{"id":"PRC-b4bc44e1-084c-11f1-b104-babe3fa8c160","activityId":"bpmnTask_3","activityName":"External Worker task","activityType":"externalWorkerServiceTask","processDefinitionId":"PRC-externalWorkerProcess:1:b485a477-084c-11f1-b104-babe3fa8c160","processDefinitionUrl":"http://localhost:8090/process-api/repository/process-definitions/PRC-externalWorkerProcess:1:b485a477-084c-11f1-b104-babe3fa8c160","processInstanceId":"PRC-b4bb5a79-084c-11f1-b104-babe3fa8c160","processInstanceUrl":"http://localhost:8090/process-api/history/historic-process-instances/PRC-b4bb5a79-084c-11f1-b104-babe3fa8c160","executionId":"PRC-b4bb818c-084c-11f1-b104-babe3fa8c160","taskId":null,"calledProcessInstanceId":null,"assignee":null,"startTime":"2026-02-12T19:54:56.797Z","endTime":null,"durationInMillis":null,"tenantId":""}],"total":3,"start":0,"sort":"startTime","order":"asc","size":3}'
        headers:
            Cache-Control:
                - no-cache, no-store, max-age=0, must-revalidate
            Content-Type:
                - application/json
            Date:
                - Thu, 12 Feb 2026 19:54:57 GMT
            Expires:
                - "0"
            Pragma:
                - no-cache
            Set-Cookie:
                - XSRF-TOKEN=69cc83b4-3a1d-4008-b833-f2ee1aa096ad; Path=/
            Vary:
                - accept-encoding
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - SAMEORIGIN
            X-Xss-Protection:
                - "0"
        status: '200 '
        code: 200
        duration: 80.711959ms
    - request:
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
            Authorization:
                - Basic YWRtaW46dGVzdA==
        url: http://localhost:8090/process-api/runtime/process-instances/PRC-b4bb5a79-084c-11f1-b104-babe3fa8c160
        method: DELETE
      response:
        body: ""
        headers:
            Cache-Control:
                - no-cache, no-store, max-age=0, must-revalidate
            Date:
                - Thu, 12 Feb 2026 19:54:57 GMT
            Expires:
                - "0"
            Pragma:
                - no-cache
            Set-Cookie:
                - XSRF-TOKEN=229d0214-10d4-4dc0-a2c7-743e440991d7; Path=/
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - SAMEORIGIN
            X-Xss-Protection:
                - "0"
        status: '204 '
        code: 204
        duration: 98.458291ms
    - request:
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
            Authorization:
                - Basic YWRtaW46dGVzdA==
        url: http://localhost:8090/process-api/repository/deployments/PRC-b484e125-084c-11f1-b104-babe3fa8c160
        method: DELETE
      response:
        body: ""
        headers:
            Cache-Control:
                - no-cache, no-store, max-age=0, must-revalidate
            Date:
                - Thu, 12 Feb 2026 19:54:57 GMT
            Expires:
                - "0"
            Pragma:
                - no-cache
            Set-Cookie:
                - XSRF-TOKEN=b9deed28-f471-4ca7-a309-034f3180cad6; Path=/
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - SAMEORIGIN
            X-Xss-Protection:
                - "0"
        status: '204 '
        code: 204
        duration: 92.183ms
